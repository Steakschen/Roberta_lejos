package EV3_leJOS;

import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;
import java.rmi.RemoteException;

import javax.swing.JButton;
import javax.swing.JFrame;

import lejos.hardware.BrickFinder;
import lejos.remote.ev3.RMIRegulatedMotor;
import lejos.remote.ev3.RemoteEV3;

public class Control extends JFrame {

public Control() {
      super("My Controller");
      RemoteEV3 ev3 = (RemoteEV3) BrickFinder.getDefault();
      setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
      JButton rotate = new JButton("Rotate");
      this.getContentPane().add(rotate);
      final RMIRegulatedMotor left = ev3.createRegulatedMotor("D", 'L');
      final RMIRegulatedMotor right = ev3.createRegulatedMotor("A", 'L');
      
      rotate.addActionListener(new ActionListener() {
         @Override
         public void actionPerformed(ActionEvent arg0) {
            try {
               left.rotate(500,true);
               right.rotate(-500);
            } catch (RemoteException e) {
               e.printStackTrace();
            }
         }         
      });
      
       addWindowListener(new WindowAdapter() {
           @Override
           public void windowClosing(WindowEvent e) {
              try {
               left.close();
               right.close();
            } catch (RemoteException e1) {
               e1.printStackTrace();
            }
           }
       });
   }
   
   public static void main(String[] args) {
      Control control = new Control();
        control.pack();
        control.setVisible(true);
   }
}